"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[691],{2575:(e,a,t)=>{t.d(a,{t:()=>o});let o=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=localStorage.getItem("token");if(!t)throw Error("Token n\xe3o encontrado. Usu\xe1rio n\xe3o autenticado.");let o=new Headers(a.headers||{});return o.set("Authorization","".concat(t)),fetch(e,{...a,headers:o,credentials:"include"})}},3140:(e,a,t)=>{t.d(a,{A:()=>i});var o=t(5155),l=t(2115),r=t(760),s=t(7869);let n={success:{iconColor:"text-green-500",bgColor:"bg-green-100",darkBgColor:"dark:bg-green-800",darkTextColor:"dark:text-green-200",svgPath:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"},error:{iconColor:"text-red-500",bgColor:"bg-red-100",darkBgColor:"dark:bg-red-800",darkTextColor:"dark:text-red-200",svgPath:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 11.793a1 1 0 1 1-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L8.586 10 6.293 7.707a1 1 0 0 1 1.414-1.414L10 8.586l2.293-2.293a1 1 0 0 1 1.414 1.414L11.414 10l2.293 2.293Z"},warning:{iconColor:"text-orange-500",bgColor:"bg-orange-100",darkBgColor:"dark:bg-orange-700",darkTextColor:"dark:text-orange-200",svgPath:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM10 15a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm1-4a1 1 0 0 1-2 0V6a1 1 0 0 1 2 0v5Z"}},i=e=>{let{type:a,message:t,duration:i=4e3}=e,[c,d]=(0,l.useState)(!0),m=n[a];return(0,l.useEffect)(()=>{let e=setTimeout(()=>d(!1),i);return()=>clearTimeout(e)},[i]),(0,o.jsx)(r.N,{children:c&&(0,o.jsxs)(s.P.div,{initial:{x:300,opacity:0},animate:{x:0,opacity:1},exit:{x:300,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow-sm dark:text-black-400 dark:bg-gray-100",role:"alert",children:[(0,o.jsx)("div",{className:"inline-flex items-center justify-center shrink-0 w-8 h-8 ".concat(m.iconColor," ").concat(m.bgColor," rounded-lg ").concat(m.darkBgColor," ").concat(m.darkTextColor),children:(0,o.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{d:m.svgPath})})}),(0,o.jsx)("div",{className:"ms-3 text-sm font-normal",children:t})]})})}},4691:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var o=t(5155),l=t(2115),r=t(5920),s=t(4662);t(4903);var n=t(3140),i=t(7869),c=t(760),d=t(2398),m=t(6274),g=t(1555),x=t(2575);let u=e=>{let a=e=>e.toString().padStart(2,"0");return"".concat(e.getFullYear(),"-").concat(a(e.getMonth()+1),"-").concat(a(e.getDate()),"T").concat(a(e.getHours()),":").concat(a(e.getMinutes()),":").concat(a(e.getSeconds()))},h=e=>{let{isOpen:a,onClose:t}=e,[r,s]=(0,l.useState)({nome:"",valor:"",time:u(new Date),tipo:"ENTRADA"}),[h,p]=(0,l.useState)(null),b=e=>{s({...r,[e.target.name]:e.target.value})},v=async()=>{let{nome:e,valor:a,time:o,tipo:l}=r;if(!e||!a||!o||!l){p("warning");return}try{let r={nome:e,valor:Number(a),time:o,tipo:l};if(console.log("Sending payload:",JSON.stringify(r)),!(await (0,x.t)("http://localhost:8080/valor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Erro ao registrar lan\xe7amento.");p("success"),s({nome:"",valor:"",time:u(new Date),tipo:"ENTRADA"}),setTimeout(()=>{p(null),t()},1500)}catch(e){console.error("Erro:",e),p("error")}};return a?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,o.jsxs)(i.P.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative",children:[(0,o.jsx)("div",{className:"fixed top-4 right-4 z-[9999] space-y-2",children:(0,o.jsxs)(c.N,{children:["success"===h&&(0,o.jsx)(n.A,{type:"success",message:"Lan\xe7amento registrado com sucesso."},"success"),"error"===h&&(0,o.jsx)(n.A,{type:"error",message:"Erro ao registrar lan\xe7amento."},"error"),"warning"===h&&(0,o.jsx)(n.A,{type:"warning",message:"Preencha todos os campos antes de enviar."},"warning")]})}),(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h1",{className:"text-xl font-bold text-gray-700",children:"Registrar Lan\xe7amento"}),(0,o.jsx)("button",{onClick:t,className:"hover:!bg-[color:#bdbdbd] !text-[color:#4a312a] hover:!text-black-800 text-2xl w-8 h-8 rounded",children:"\xd7"})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("input",{type:"text",name:"nome",placeholder:"Descri\xe7\xe3o",value:r.nome,onChange:b,className:"w-full p-2 border rounded text-gray-500"}),(0,o.jsx)(g.HG,{name:"valor",value:r.valor,onValueChange:e=>{let{value:a}=e;s(e=>({...e,valor:a}))},thousandSeparator:".",decimalSeparator:",",prefix:"R$ ",allowNegative:!1,className:"w-full p-2 border rounded text-gray-500",placeholder:"R$"}),(0,o.jsx)(m.V,{value:new Date(r.time),onChange:e=>{let a=e.value;a instanceof Date&&!isNaN(a.getTime())&&s(e=>({...e,time:u(a)}))},showTime:!0,hourFormat:"24",showIcon:!0,hideOnDateTimeSelect:!0,className:"custom-calendar w-full",dateFormat:"dd/mm/yy",placeholder:"Data e Hora"}),(0,o.jsxs)("select",{name:"tipo",value:r.tipo,onChange:b,className:"w-full p-2 border rounded text-gray-500",children:[(0,o.jsx)("option",{value:"ENTRADA",children:"Entrada"}),(0,o.jsx)("option",{value:"DESPESA",children:"Despesa"})]}),(0,o.jsx)(d.$,{raised:!0,className:"!bg-[color:#e3b963] hover:!bg-[color:#c49d54] !font-bold !text-white p-2 rounded w-full items-center justify-center",onClick:v,children:"Registrar Lan\xe7amento"})]})]})}):null};var p=t(4396),b=t(6277),v=t(3816),f=t(4008),j=t(9048),y=t(4573),w=t(7298);let N=()=>{let[e,a]=(0,l.useState)([]),[t,n]=(0,l.useState)(!0),[i,c]=(0,l.useState)(!1),[g,u]=(0,l.useState)("table"),[N,C]=(0,l.useState)(null),[k,S]=(0,l.useState)(null),D=e=>{(0,w.Z)({message:"Voc\xea tem certeza que deseja deletar este lan\xe7amento?",header:"Confirma\xe7\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",acceptClassName:"p-button-danger",rejectClassName:"!bg-gray-600 hover:!bg-gray-700 text-black",accept:async()=>{await R(e),A()}})},[E,T]=(0,l.useState)({global:{value:"",matchMode:p.Rn.CONTAINS}});(0,l.useEffect)(()=>{A()},[]);let A=async()=>{n(!0);try{let e=await (0,x.t)("http://localhost:8080/valor"),t=(await e.json()).map(e=>({id:e.id,nome:e.nome,valor:e.valor,time:e.time,tipo:e.tipo}));a(t)}catch(e){console.error("Erro ao carregar lan\xe7amentos:",e)}finally{n(!1)}},L=async t=>{let o=t.newData;try{await (0,x.t)("http://localhost:8080/valor/".concat(o.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});let l=[...e];l[t.index]=o,a(l),A()}catch(e){console.error("Erro ao atualizar lan\xe7amento:",e)}},R=async t=>{try{await (0,x.t)("http://localhost:8080/valor/".concat(t),{method:"DELETE"}),a(e.filter(e=>e.id!==t))}catch(e){console.error("Erro ao deletar lan\xe7amento:",e)}},M=e.filter(e=>{let a=new Date(e.time),t=!N||a>=N,o=!k||a<=k;return t&&o}),V=M.filter(e=>"ENTRADA"===e.tipo).reduce((e,a)=>e+a.valor,0),P=M.filter(e=>"DESPESA"===e.tipo).reduce((e,a)=>e+a.valor,0),F=V-P,$=e=>"R$ ".concat(e.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})),O=(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,o.jsx)(d.$,{text:!0,icon:"pi pi-filter-slash",label:"Limpar",onClick:()=>T({global:{value:"",matchMode:p.Rn.CONTAINS}}),className:"w-full sm:w-auto !text-[color:#4a312a] hover:!bg-[color:#bdbdbd]"}),(0,o.jsx)("span",{className:"p-input-icon-left w-full sm:w-auto",children:(0,o.jsx)(b.S,{value:"value"in E.global?E.global.value:"",onChange:e=>{let a=e.target.value,t={...E},o=t.global;o&&"value"in o&&(o.value=a,t.global=o,T(t))},placeholder:"Pesquisar...",className:"w-full sm:w-64"})})]}),Z=()=>{let e={};return M.forEach(a=>{let t=new Date(a.time),o=(0,f.GP)(t,"MMM/yyyy",{locale:y.F});e[o]||(e[o]={entrada:0,despesa:0,date:new Date(t.getFullYear(),t.getMonth(),1)}),"ENTRADA"===a.tipo?e[o].entrada+=a.valor:e[o].despesa+=a.valor}),Object.entries(e).map(e=>{let[a,t]=e;return{mes:a,...t}}).sort((e,a)=>e.date.getTime()-a.date.getTime())};return t?(0,o.jsx)("div",{className:"flex items-center justify-center h-screen w-full",children:(0,o.jsx)(v.A,{size:"150",speed:"2.5",color:"Brown"})}):(0,o.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-full space-y-6",children:[(0,o.jsxs)("div",{className:"flex flex-wrap gap-2 justify-between items-center",children:[(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(d.$,{label:"Ver Tabela",onClick:()=>u("table"),raised:!0,className:"!p-2 ".concat("table"===g?"!bg-[color:#c49d54] hover:!bg-[color:#c49d54]":"!bg-[color:#e3b963] hover:!bg-[color:#c49d54]")}),(0,o.jsx)(d.$,{label:"Ver Gr\xe1fico",onClick:()=>u("graph"),raised:!0,className:"!p-2 ".concat("graph"===g?"!bg-[color:#c49d54] hover:!bg-[color:#c49d54]":"!bg-[color:#e3b963] hover:!bg-[color:#c49d54]")})]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsx)(m.V,{value:N,onChange:e=>C(e.value),dateFormat:"dd/mm/yy",placeholder:"In\xedcio",showIcon:!0,className:"custom-calendar"})}),(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsx)(m.V,{value:k,onChange:e=>S(e.value),dateFormat:"dd/mm/yy",placeholder:"Fim",showIcon:!0,className:"custom-calendar"})}),(0,o.jsx)(d.$,{text:!0,label:"Limpar Datas",onClick:()=>{C(null),S(null)},className:"text-sm !text-[color:#4a312a] hover:!bg-[color:#bdbdbd]"})]}),(0,o.jsx)(d.$,{text:!0,raised:!0,label:"Novo Lan\xe7amento",onClick:()=>c(!0),className:"!bg-[color:#e3b963] hover:!bg-[color:#c49d54] !text-white p-2 rounded"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-white text-center",children:[(0,o.jsxs)("div",{className:"bg-[color:#72e363] rounded-xl p-4 shadow",children:["Entradas: ",(0,o.jsx)("br",{})," ",(0,o.jsx)("strong",{children:$(V)})]}),(0,o.jsxs)("div",{className:"bg-[color:#e36363] rounded-xl p-4 shadow",children:["Despesas: ",(0,o.jsx)("br",{})," ",(0,o.jsx)("strong",{children:$(P)})]}),(0,o.jsxs)("div",{className:"rounded-xl p-4 shadow ".concat(F>=0?"bg-[color:#63bfe3]":"bg-[color:#dde363]"),children:["Saldo: ",(0,o.jsx)("br",{})," ",(0,o.jsx)("strong",{children:$(F)})]})]}),"table"===g?(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)(r.b,{value:M,filters:E,globalFilterFields:["nome","tipo"],header:O,paginator:!0,rows:8,stripedRows:!0,showGridlines:!0,emptyMessage:"Nenhum lan\xe7amento encontrado",responsiveLayout:"scroll",editMode:"row",dataKey:"id",onRowEditComplete:L,children:[(0,o.jsx)(s.V,{field:"nome",header:"Descri\xe7\xe3o",editor:e=>{var a;return(0,o.jsx)(b.S,{value:null!==(a=e.value)&&void 0!==a?a:"",onChange:a=>{e.editorCallback&&e.editorCallback(a.target.value)}})},sortable:!0}),(0,o.jsx)(s.V,{field:"valor",header:"Valor",editor:e=>{var a;return(0,o.jsx)(b.S,{value:(null===(a=e.value)||void 0===a?void 0:a.toString())||"",onChange:a=>{let t=parseFloat(a.target.value);e.editorCallback&&!isNaN(t)&&e.editorCallback(t)}})},body:e=>$(e.valor),sortable:!0}),(0,o.jsx)(s.V,{field:"time",header:"Data",body:e=>(0,f.GP)(new Date(e.time),"dd/MM/yyyy - HH:mm"),sortable:!0}),(0,o.jsx)(s.V,{field:"tipo",header:"Tipo",body:e=>(0,o.jsx)("span",{className:"ENTRADA"===e.tipo?"text-[color:#72e363]":"text-[color:#e36363]",children:e.tipo}),sortable:!0}),(0,o.jsx)(s.V,{rowEditor:!0,header:"",bodyStyle:{textAlign:"center"}}),(0,o.jsx)(s.V,{body:e=>(0,o.jsx)(d.$,{icon:"pi pi-trash",className:"p-button-danger p-button-icon-only",onClick:()=>D(e.id),"aria-label":"Deletar lan\xe7amento"}),header:"",bodyStyle:{textAlign:"center"}})]})}):(0,o.jsx)("div",{className:"bg-white p-4 rounded shadow",children:(0,o.jsx)(j.t,{type:"bar",data:{labels:Z().map(e=>e.mes),datasets:[{label:"Entradas",backgroundColor:"#72e363",data:Z().map(e=>e.entrada)},{label:"Despesas",backgroundColor:"#e36363",data:Z().map(e=>e.despesa)}]},options:{indexAxis:"x",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{x:{beginAtZero:!0},y:{ticks:{autoSkip:!0,maxTicksLimit:10}}}},style:{height:"400px",backgroundColor:"#ffffff"}})}),(0,o.jsx)(h,{isOpen:i,onClose:()=>{c(!1),A()}}),(0,o.jsx)(w.T,{})]})}}}]);